# Supabase API Tests Makefile
# Simple commands to setup and run API tests

.PHONY: help install test clean

# Default target
help:
	@echo "ğŸš€ Supabase API Tests"
	@echo ""
	@echo "Available commands:"
	@echo "  make install  - Install Python dependencies"
	@echo "  make test     - Run all API tests"
	@echo "  make clean    - Clean up virtual environment"
	@echo "  make all      - Install + Test (recommended)"
	@echo ""

# Install Python dependencies in virtual environment
install:
	@echo "ğŸ“¦ Setting up virtual environment..."
	python3 -m venv venv
	@echo "ğŸ“¦ Installing dependencies..."
	./venv/bin/pip install -r requirements.txt
	@echo "âœ… Dependencies installed in virtual environment"

# Run API tests
test:
	@echo "ğŸ§ª Running Supabase API tests..."
	@if [ -d "venv" ]; then \
		./venv/bin/python test_api.py; \
	else \
		echo "âš ï¸  Virtual environment not found. Run 'make install' first."; \
		python3 test_api.py; \
	fi

# Clean up virtual environment
clean:
	@echo "ğŸ§¹ Cleaning up virtual environment..."
	rm -rf venv
	@echo "âœ… Virtual environment removed"

# Install and test (recommended workflow)
all: install test
	@echo ""
	@echo "ğŸ‰ All done! Check the test results above."
	@echo "ğŸ“Š Expected: 13-14/14 tests should pass"
	@echo "ğŸŒ Dashboard: https://supabase.stack-ai.jesuspaz.com/"
